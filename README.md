# KRM - Kubernetesèµ„æºç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

KRM (Kubernetes Resource Manager) æ˜¯ä¸€ä¸ªåŸºäºWebçš„Kubernetesèµ„æºç®¡ç†å¹³å°ï¼Œæä¾›ç›´è§‚çš„å›¾å½¢åŒ–ç•Œé¢æ¥ç®¡ç†å¤šä¸ªKubernetesé›†ç¾¤ä¸­çš„å„ç§èµ„æºã€‚è¯¥ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå¤šé›†ç¾¤ç®¡ç†ã€èµ„æºç›‘æ§å’Œæ“ä½œã€‚

### âš ï¸ é¡¹ç›®çŠ¶æ€è¯´æ˜

**åç«¯æœåŠ¡**: âœ… å®Œæ•´å®ç°ï¼ŒåŒ…å«æ‰€æœ‰Kubernetesèµ„æºçš„CRUDæ“ä½œ
**å‰ç«¯ç•Œé¢**: ğŸš§ éƒ¨åˆ†å®ç°ï¼Œç”±äºå·¥ä½œç¹å¿™ï¼Œå‰ç«¯é¡¹ç›®åªå®Œæˆäº†åŸºç¡€æ¡†æ¶å’Œéƒ¨åˆ†åŠŸèƒ½é¡µé¢

> **è‡´æ­‰**: ç”±äºå·¥ä½œç¹å¿™ï¼Œå‰ç«¯é¡¹ç›®ç›®å‰åªå®ç°äº†åŸºç¡€æ¡†æ¶å’Œéƒ¨åˆ†åŠŸèƒ½é¡µé¢ã€‚åç«¯APIæ¥å£å·²å®Œæ•´å®ç°ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚å¦‚æœæ‚¨éœ€è¦å®Œæ•´çš„å‰ç«¯ç•Œé¢ï¼Œå»ºè®®ï¼š
> - ä½¿ç”¨Postmanç­‰å·¥å…·ç›´æ¥è°ƒç”¨APIæ¥å£
> - æˆ–è€…åŸºäºç°æœ‰çš„å‰ç«¯æ¡†æ¶ç»§ç»­å¼€å‘
> - ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–Kubernetesç®¡ç†å·¥å…·ï¼ˆå¦‚kubectlã€Lensç­‰ï¼‰é…åˆåç«¯APIä½¿ç”¨

## æŠ€æœ¯æ ˆ

### åç«¯ (Backend)
- **è¯­è¨€**: Go1.20
- **Webæ¡†æ¶**: Gin
- **Kuberneteså®¢æˆ·ç«¯**: client-go v028.0*è®¤è¯**: JWT (golang-jwt/jwt/v5)
- **é…ç½®ç®¡ç†**: Viper
- **æ—¥å¿—**: Logrus
- **Kuberneteså·¥å…·åº“**: kubeutils

### å‰ç«¯ (Frontend) - ğŸš§ éƒ¨åˆ†å®ç°
- **æ¡†æ¶**: Vue30.34
- **æ„å»ºå·¥å…·**: Vite 4.4**UIç»„ä»¶åº“**: Element Plus2.30.8
- **çŠ¶æ€ç®¡ç†**: Pinia 20.1**è·¯ç”±**: Vue Router42.4
- **HTTPå®¢æˆ·ç«¯**: Axios 1.4
- **ä»£ç ç¼–è¾‘å™¨**: CodeMirror 6.0.1
- **æ ·å¼**: Less 40.13

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” è®¤è¯ä¸æˆæƒ
- JWT Tokenè®¤è¯
- ç”¨æˆ·ç™»å½•/ç™»å‡º
- è·¯ç”±å®ˆå«ä¿æŠ¤

### ğŸ¢ å¤šé›†ç¾¤ç®¡ç†
- æ”¯æŒæ·»åŠ å¤šä¸ªKubernetesé›†ç¾¤
- é›†ç¾¤çŠ¶æ€ç›‘æ§
- é›†ç¾¤é…ç½®ç®¡ç†
- é›†ç¾¤åˆ‡æ¢åŠŸèƒ½

### ğŸ“¦ é›†ç¾¤èµ„æºç®¡ç†
- **å‘½åç©ºé—´ (Namespace)**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€ç¼–è¾‘
- **èŠ‚ç‚¹ (Node)**: æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨ã€èŠ‚ç‚¹è¯¦æƒ…ã€èŠ‚ç‚¹ç¼–è¾‘
- **Pod**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **Deployment**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **StatefulSet**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **DaemonSet**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **CronJob**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **ReplicaSet**: æŸ¥çœ‹åˆ—è¡¨

### ğŸŒ ç½‘ç»œèµ„æºç®¡ç†
- **Service**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **Ingress**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°

### ğŸ’¾ å­˜å‚¨èµ„æºç®¡ç†
- **PersistentVolume (PV)**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **PersistentVolumeClaim (PVC)**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **StorageClass**: æŸ¥çœ‹åˆ—è¡¨

### ğŸ”§ é…ç½®èµ„æºç®¡ç†
- **ConfigMap**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°
- **Secret**: åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ã€æ›´æ–°

### ğŸ¨ ç”¨æˆ·ç•Œé¢ç‰¹æ€§
- å“åº”å¼è®¾è®¡
- ç°ä»£åŒ–UIç•Œé¢
- ä»£ç ç¼–è¾‘å™¨æ”¯æŒYAMLç¼–è¾‘
- é›†ç¾¤å’Œå‘½åç©ºé—´é€‰æ‹©å™¨
- èµ„æºåˆ—è¡¨å’Œè¯¦æƒ…è§†å›¾
- å®æ—¶çŠ¶æ€æ›´æ–°

## é¡¹ç›®ç»“æ„

```
krm/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡ âœ… å®Œæ•´å®ç°
â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ controllers/        # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ auth/          # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ cluster/       # é›†ç¾¤ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ deployment/    # Deploymentç®¡ç†
â”‚   â”‚   â”œâ”€â”€ namespace/     # å‘½åç©ºé—´ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ node/          # èŠ‚ç‚¹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ pod/           # Podç®¡ç†
â”‚   â”‚   â”œâ”€â”€ service/       # Serviceç®¡ç†
â”‚   â”‚   â””â”€â”€ ...           # å…¶ä»–èµ„æºæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ middlerwares/      # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ routers/          # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ main.go           # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ frontend/              # å‰ç«¯åº”ç”¨ ğŸš§ éƒ¨åˆ†å®ç°
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/          # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ components/   # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ config/       # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ router/       # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ store/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ view/         # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ package.json      # ä¾èµ–é…ç½®
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Go 120s 16+
- Kubernetesé›†ç¾¤è®¿é—®æƒé™

### ğŸ” é»˜è®¤ç™»å½•å‡­æ®
- **ç”¨æˆ·å**: `kunyu`
- **å¯†ç **: `kunyu123`

> **æ³¨æ„**: è¿™äº›å‡­æ®æ˜¯MD5åŠ å¯†å­˜å‚¨çš„ï¼Œå¦‚éœ€ä¿®æ”¹è¯·å‚è€ƒé…ç½®è¯´æ˜éƒ¨åˆ†ã€‚

### åç«¯å¯åŠ¨

1 è¿›å…¥åç«¯ç›®å½•
```bash
cd backend
```

2è£…ä¾èµ–
```bash
go mod download
```

3ç¾¤ä¿¡æ¯
   - åœ¨ `config/meta.kubeconfig` ä¸­é…ç½®ç®¡ç†é›†ç¾¤çš„kubeconfig
   - æˆ–é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®

4åŠ¨æœåŠ¡
```bash
go run main.go
```

### å‰ç«¯å¯åŠ¨ ğŸš§ éƒ¨åˆ†åŠŸèƒ½

1 è¿›å…¥å‰ç«¯ç›®å½•
```bash
cd frontend
```2. å®‰è£…ä¾èµ–
```bash
npm install
```

3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

4æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

## APIæ¥å£

### è®¤è¯æ¥å£
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º

### é›†ç¾¤ç®¡ç†æ¥å£
- `GET /api/cluster/list` - è·å–é›†ç¾¤åˆ—è¡¨
- `POST /api/cluster/add` - æ·»åŠ é›†ç¾¤
- `PUT /api/cluster/update` - æ›´æ–°é›†ç¾¤
- `DELETE /api/cluster/delete` - åˆ é™¤é›†ç¾¤

### èµ„æºç®¡ç†æ¥å£
æ¯ä¸ªKubernetesèµ„æºéƒ½æä¾›æ ‡å‡†çš„CRUDæ“ä½œï¼š
- `GET /api/[object Object]resource}/list` - è·å–èµ„æºåˆ—è¡¨
- `GET /api/{resource}/get` - è·å–å•ä¸ªèµ„æº
- `POST /api/{resource}/create` - åˆ›å»ºèµ„æº
- `PUT /api/{resource}/update` - æ›´æ–°èµ„æº
- `DELETE /api/{resource}/delete` - åˆ é™¤èµ„æº

## éƒ¨ç½²

### Dockeréƒ¨ç½²

1 æ„å»ºåç«¯é•œåƒ
```bash
cd backend
docker build -t krm-backend:v1 .
```

2 æ„å»ºå‰ç«¯é•œåƒ
```bash
cd frontend
docker build -t krm-frontend:v1 .
```3. ä½¿ç”¨Docker Composeå¯åŠ¨
```yaml
version:3.8ervices:
  backend:
    image: krm-backend:v1    ports:
      - "8080:8080
    environment:
      - GIN_MODE=release
      
  frontend:
    image: krm-frontend:v1    ports:
      - "8080 depends_on:
      - backend
```

### Kuberneteséƒ¨ç½²

å‚è€ƒ `backend/README.md` ä¸­çš„è¯¦ç»†éƒ¨ç½²è¯´æ˜ã€‚

## é…ç½®è¯´æ˜

### åç«¯é…ç½®
- ç«¯å£é…ç½®: é€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶è®¾ç½®
- æ—¥å¿—çº§åˆ«: æ”¯æŒdebugã€infoã€warnã€errorçº§åˆ«
- é›†ç¾¤é…ç½®: æ”¯æŒå¤šé›†ç¾¤kubeconfigé…ç½®

### å‰ç«¯é…ç½®
- APIåœ°å€é…ç½®: åœ¨ `src/config/index.js` ä¸­è®¾ç½®
- èœå•é…ç½®: åœ¨ `src/config/menu.js` ä¸­è‡ªå®šä¹‰èœå•ç»“æ„

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„Kubernetesèµ„æºæ”¯æŒ
1. åœ¨åç«¯æ·»åŠ æ§åˆ¶å™¨
2æ·»åŠ è·¯ç”±é…ç½®
3. åœ¨å‰ç«¯æ·»åŠ å¯¹åº”çš„é¡µé¢å’ŒAPI4. æ›´æ–°èœå•é…ç½®

### ä»£ç è§„èŒƒ
- åç«¯éµå¾ªGoè¯­è¨€è§„èŒƒ
- å‰ç«¯ä½¿ç”¨ESLintå’ŒPrettier
- æäº¤ä¿¡æ¯ä½¿ç”¨çº¦å®šå¼æäº¤

## è´¡çŒ®æŒ‡å—

1 Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
45. åˆ›å»ºPull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤Issue
- å‘é€é‚®ä»¶
- å‚ä¸è®¨è®º

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªç”¨äºå­¦ä¹ å’Œæ¼”ç¤ºçš„Kubernetesèµ„æºç®¡ç†å¹³å°ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰è¯·ç¡®ä¿å……åˆ†æµ‹è¯•å’Œé…ç½®å®‰å…¨æªæ–½ã€‚ 